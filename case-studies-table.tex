%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% This table is here instead of the evaluation section
%% so that it is placed on the appropriate page.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% a line in tab:case-studies
% arguments: project name, original LoC, # of resources (-AcountMustCall), diff size, # of annotations, TPs, Confirmed TPs, FPs, run time in seconds
\newcommand{\osstableheader}[8]{\textbf{\smaller{#1}} & \mcoc{#2} & \mcocr{#3} & \mcoc{#4} & \mcocr{#5} & \mcoc{#6} & \mcocr{#7} & \mcoc{#8}}
\newcommand{\osstablerow}[8]{\textbf{\smaller{#1}} & #2 & #3 & #4 & #5 & #6 & #7 & #8}
% "mcoc" stands for ``multi-column, one, centered''.
\newcommand{\mcoc}[1]{\multicolumn{1}{c}{#1}}
% "mcoc" stands for ``multi-column, one, centered, right bar''.
\newcommand{\mcocr}[1]{\multicolumn{1}{c|}{#1}}

\begin{table*}
  \caption{
    Verifying the absence of resource leaks.
    % LoC is computed using scc. Be careful when computing LoC to run scc from relevant top-level
    % directory that only contains source code (not test code!) to make sure that the count is accurate.
    % for Zookeeper, this directory is zookeeper/zookeeper-server/src/main/java
    Throughout, ``LoC'' is lines of non-comment, non-blank Java code.
    ``Resources'' is the number of resources created by the program.
    ``Resource leaks'' are true positive warnings.
    ``False positives'' are where the tool reported a potential leak,
    but manual analysis revealed that no leak is possible.
    % to compute the diff size, do something like the following (this is what I did for Zookeeper) from the with-annotations branch:
    % > git diff origin/with-checker -- '*.java'
    % then count the number of individual changesets and report that
    ``Annotations'' and ``code changes'' are the number of edits to program text; see
    \cref{sec:annotations-and-code-changes} for details.
  }
  \vspace{-5pt}                % space hack
  \label{tab:case-studies}
  \posttablecaption

  \begin{tabular}{@{}lrc|cc|cc|c@{}}
    \osstableheader{}                                                 {}              {}          {Resource} {False}        {Annota-}  {Code}      {Wall-clock}         \\
    \osstableheader{}                                                 {LoC}           {Resources} {leaks}   {positives}     {tions}    {changes}   {time}              \\
    \hline                                                                                                        
    \osstablerow{apache/zookeeper:zookeeper-server}                   {45,248}        {171}       {13}      {48}            {122}      {\zph 5}    {1m 24s}           \\
    \osstablerow{apache/hadoop:hadoop-hdfs-project/hadoop-hdfs}       {151,595}       {365}       {23}      {50}            {117}      {13}        {16m 21s\zph}          \\
    \osstablerow{apache/hbase:hbase-server, hbase-client}             {220,828}       {\zph 55}   {\zph 5}  {22}        {\zph 45}      {\zph 5}    {7m 45s}           \\
    \osstablerow{plume-lib/plume-util}                                {10,187}        {109}       {\zph 8}  {\zph 2}    {\zzph 2}      {19}        {0m 15s}           \\
    \hline                                                                                                        
    \osstablerow{\textbf{Total}}                                      {427,858}       {700}       {49}      {122}           {286}      {42}        {-}                \\
  \end{tabular}
\end{table*}

% LocalWords:  LoC Annota tions apache hbase util
